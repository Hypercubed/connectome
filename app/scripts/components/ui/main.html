
<div snap-drawer id="ui" class="content" ng-controller="UICtrl">
  <div class="col-md-12">

    <h4>Ligand Receptor Connectome</h4>
    A visual guide to FANTOM5 Ligand-Receptor interactions
    
    <p />
    <div class="ng-cloak">
      Pairs: {{selected.pairs.length}} / {{data.pairs.length}}
      <br />Nodes: {{graph.nodes.length}} / {{data.cells.length}}
      <br />Edges: {{graph.edges.length}} / {{edgeCount}} 
      <br /><span class="bg-danger" ng-show="edgeCount > maxEdges">Maximum of {{maxEdges |number:0}} edges shown</span></span>    
    </div>

    <h3>
      <a href="" data-toggle="collapse" data-target="#filters" class="">Filters <b class="caret"></b></a>
    </h3>
    <div id="filters" class="fade in collapse">
      <p />
      <div class="">
        <a href data-toggle="collapse" data-target="#pairsBox" >Ligand - Receptor Pairs <b class="caret"></b></a>
        <div class="pull-right small">{{selected.pairs.length}} / <a href ng-click="selected.pairs = data.pairs">{{data.pairs.length}}</a> <a href ng-click="selected.pairs = []">(clear)</a></div>  
      </div>
      <div id="pairsBox" class="fade out collapse">
        <select id="pairs" class="col-md-12" size="30" multiple chosen  display-selected-options="false" search-contains="true" ng-model="selected.pairs" ng-options="p.Ligand + '-' + p.Receptor for p in data.pairs track by p.id" data-placeholder="Select Ligand-Receptor pairs"></select>
      </div>

      <p />
      <div class="">
        <a href data-toggle="collapse" data-target="#cellsBox" >Samples <b class="caret"></b></a>
        <div class="pull-right small">{{selected.cells.length}} / <a href ng-click="selected.cells = data.cells">{{data.cells.length}}</a> <a href ng-click="selected.cells = []">(clear)</a></div>
      </div>
      <div id="cellsBox" class="fade out collapse" >
        <select id="cells" class="col-md-12" size="30" multiple  chosen  display-selected-options="false" search-contains="true" ng-model="selected.cells" ng-options="c.name for c in data.cells track by c.id" data-placeholder="Select cell samples" style="width: 100%"></select>
      </div>

      <p />
      <div>
        <a href data-toggle="collapse" data-target="#ligandRange" >Ligand min TPM  <b class="caret"></b></a>
        <div class="pull-right small"> > {{ligandRange.val | number:2}} tpm</div>
      </div>
      <div slider id="ligandRange" class="fade out collapse" ng-model="ligandRange.val" max="ligandRange.max" min="1"></div>

      <p />
      <div>
        <a href data-toggle="collapse" data-target="#receptorRange" >Receptor min TPM  <b class="caret"></b></a>
        <div class="pull-right small"> > {{receptorRange.val | number:2}} tpm</div>
      </div>
      <div slider id="receptorRange" class="fade out collapse" ng-model="receptorRange.val" max="receptorRange.max" min="1"></div>

      <p />
      <div>
        <a href data-toggle="collapse" data-target="#edges" >Maximum number of edges  <b class="caret"></b></a>
        <div class="pull-right small"> {{maxEdges | number:0}}</div>
      </div>
      <div slider id="edges" class="fade out collapse" ng-model="maxEdges" max="1000" min="0"></div>

    </div>

    <h3>
      <a href="" data-toggle="collapse" data-target="#help" class="">Explanation <b class="caret"></b></a>
    </h3>
    <div id="help" class="fade out collapse">
      <ul>
        <li>Select Ligand - Receptor pair in the filter section on the left.
        <li>Select cell samples.
        <li>The top 100 edges (L-R pairs) for the selected cells will appear in the middle.
        <li>Hover over nodes and edges to get more information.
        <li>Click and drag nodes to move.
        <li>Double click a node to fix in place.  Double click again to release.
      </ul> 
    </div>
   
  </div>
</div>
<div id="content" snap-content id="content">

  <div id="vis">
    <noscript>Missing javascript</noscript>
    <svg></svg>
  </div>

  <div id="header" class="header row">
    <button snap-toggle snap-dragger class="btn"><i class="glyphicon glyphicon-align-justify"></i></button>
    <div id="legend">
      <div class="rotate"> <div class="node ligand"></div> Ligand</div>
      <div class="rotate"> <div class="node receptor"></div> Receptor</div>
      <div class="rotate"> <div class="node both"></div> Both</div>
    </div>
  </div>

  <div id="footer" class="footer text-center">
    <p>Made and maintained by J. Harshbarger.</p>
  </div>

</div>




