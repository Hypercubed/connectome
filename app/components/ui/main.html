
<div id="content">

  <noscript>Missing javascript</noscript>

  <div id="vis" context-menu="rightClick($event)" style=""
    data-target="myMenu"
    ng-class="{ 'highlight': panels.state.highlight, 'expanded': panels.state.contextmenu }">
    <svg></svg>

    <div class="dropdown position-fixed" id="myMenu">
      <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu2">

        <li ng-if="clickedItem" ng-click="clickedItem.fixed = true; updateSelection()" class="dropdown-header">{{clickedItem.name}}</li>

        <li ng-if="clickedItem.type == 'sample' || clickedItem.type == 'gene'">
          <a class="pointer" role="menuitem" ng-click="clickedItem.ticked = false">Hide</a>
        </li>

        <li class="dropdown-submenu" ng-if="clickedItem.type == 'sample'">
          <a class="pointer" role="menuitem">Show</a>
          <ul class="dropdown-menu">
            <li><a class="pointer" role="menuitem" ng-click="showExpressionEdges({sample: clickedItem},10)">Top expressed genes</a></li>
            <li><a class="pointer" role="menuitem" ng-click="showExpressionEdges({source: clickedItem},10)">Top expressed ligands</a></li>
            <li><a class="pointer" role="menuitem" ng-click="showExpressionEdges({target: clickedItem},10)">Top expressed receptors</a></li>
            <li><a class="pointer" role="menuitem" ng-click="_showPaths({source: clickedItem, pair: { ticked:  true } }, 10)">Top pathways starting here</a></li>
            <li><a class="pointer" role="menuitem" ng-click="_showPaths({target: clickedItem, pair: { ticked:  true } }, 10)">Top pathways ending here</a></li>
          </ul>
        </li>

        <li class="dropdown-submenu" ng-if="clickedItem.type == 'gene'">
          <a class="pointer" role="menuitem">Show</a>
          <ul class="dropdown-menu">
            <li><a class="pointer" role="menuitem" ng-click="showExpressionEdges({gene: clickedItem},10)">Top top expressed samples</a></li>
            <li><a class="pointer" role="menuitem" ng-click="_showPaths({ligand:   clickedItem, pair: { ticked:  true } }, 10)" ng-show="clickedItem.class == 'ligand'">Top pathways</a></li>
            <li><a class="pointer" role="menuitem" ng-click="_showPaths({receptor: clickedItem, pair: { ticked:  true } }, 10 )" ng-show="clickedItem.class == 'receptor'">Top pathways</a></li>
          </ul>
        </li>

        <li class="dropdown-submenu" ng-if="clickedItem.type == 'pair'">
          <a class="pointer" role="menuitem">Show</a>
          <ul class="dropdown-menu">
            <li><a class="pointer" role="menuitem" ng-click="_showPaths({ligand: clickedItem.source, receptor: clickedItem.target}, 10)">Top paths</a></li>
          </ul>
        </li>

        <li class="divider" ng-if="clickedItem.type == 'sample' || clickedItem.type == 'gene'"></li>

        <li><a class="pointer" ng-click="test()">Show top paths between all visible cells</a></li>

        <li class="divider" ng-if="clickedItem.type == 'sample' || clickedItem.type == 'gene'"></li>

        <li><a class="pointer" ng-click="clearVis()">Clear visualization</a></li>
        <li><a class="pointer" ng-click="resetVis()">Default visualization</a></li>

      </ul>
    </div>

  </div>

</div>

<div ng-controller="PanelCtrl as panels" ng-cloak>

  <div class="pageslide pageslide-right" ng-show="panels.state.info" >
    <div class="" ng-if="panels.state.info">
      <div class="new-tip" ng-cloak ng-show="graphData.nodes.length > 0">
        <ul class="list-unstyled" bindonce="data">
          <li>Samples: {{selectedIds.cells.length}} / <span bo-text="data.cells.length"></span></li>
          <li>Genes:   {{selectedIds.genes.length}} / <span bo-text="data.genes.length"></span></li>
          <li>Pairs:   {{selectedIds.pairs.length}} / <span bo-text="data.pairs.length"></span></li>
        </ul>
        <ul class="list-unstyled" bindonce="graphData">
          <li>Nodes: {{graphData._nodes.length}} / {{graphData.nodes.length}}</li>
          <li>Edges: {{graphData._edges.length}} / {{graphData.edges.length}}</li>
        </ul>
      </div>

      <div growl></div>

      <div ng-repeat="item in graphData.selectedItems track by item.id" class="new-tip" ng-class="item.hover ? 'bg-warning' : 'bg-danger'" ng-if="item.type">
        <button type="button" class="close" aria-hidden="true" ng-click="revoveSelectedItem($index)">&times;</button>
        <div ng-include="'components/ui/item.html'">
        </div>
      </div>
    </div>
  </div>

  <div class="pageslide-toggle right">
    <button type="button" ng-click="panelState.info = !panelState.info" class="navbar-toggle pull-right" title="Click to show options" style="display: inline-block;">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>

  <div class="pageslide pageslide-bottom" ng-show="panels.state.data" ng-include="'components/ui/bottom-panel.html'">
  </div>

</div>
